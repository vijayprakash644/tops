<svg xmlns="http://www.w3.org/2000/svg" width="1400" height="760" viewBox="0 0 1400 760">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="8" refX="9" refY="4" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L10,4 L0,8 Z" fill="#333333" />
    </marker>
    <style>
      .label { font: 14px Arial, sans-serif; fill: #111111; }
      .title { font: 16px Arial, sans-serif; font-weight: bold; fill: #111111; }
      .lifeline { stroke: #999999; stroke-width: 1; stroke-dasharray: 4 4; }
      .line { stroke: #333333; stroke-width: 1.5; }
      .section { stroke: #cccccc; stroke-width: 1; }
      .note { font: 12px Arial, sans-serif; fill: #333333; }
    </style>
  </defs>

  <rect x="0" y="0" width="1400" height="760" fill="#ffffff" />

  <!-- Participants -->
  <text class="title" x="40" y="40">TopS.II CRM</text>
  <text class="title" x="220" y="40">APIcc</text>
  <text class="title" x="400" y="40">Ameyo Upload API</text>
  <text class="title" x="640" y="40">Ameyo Dialer</text>
  <text class="title" x="880" y="40">PHP Relay</text>
  <text class="title" x="1080" y="40">State Store</text>
  <text class="title" x="1260" y="40">TopS.II / FastHelp</text>

  <!-- Lifelines -->
  <line class="lifeline" x1="80" y1="60" x2="80" y2="720" />
  <line class="lifeline" x1="260" y1="60" x2="260" y2="720" />
  <line class="lifeline" x1="460" y1="60" x2="460" y2="720" />
  <line class="lifeline" x1="700" y1="60" x2="700" y2="720" />
  <line class="lifeline" x1="940" y1="60" x2="940" y2="720" />
  <line class="lifeline" x1="1140" y1="60" x2="1140" y2="720" />
  <line class="lifeline" x1="1320" y1="60" x2="1320" y2="720" />

  <!-- Section: Lead Upload -->
  <text class="title" x="20" y="90">Lead Upload (Pre-call)</text>
  <line class="section" x1="20" y1="100" x2="1360" y2="100" />

  <line class="line" x1="80" y1="140" x2="260" y2="140" marker-end="url(#arrow)" />
  <text class="label" x="95" y="132">POST /receivedata1/index.php</text>

  <line class="line" x1="260" y1="170" x2="460" y2="170" marker-end="url(#arrow)" />
  <text class="label" x="285" y="162">Upload lead records</text>

  <line class="line" x1="460" y1="200" x2="700" y2="200" marker-end="url(#arrow)" />
  <text class="label" x="490" y="192">Leads available for dialing</text>

  <!-- Section: Call Start -->
  <text class="title" x="20" y="270">Call Start</text>
  <line class="section" x1="20" y1="280" x2="1360" y2="280" />

  <line class="line" x1="700" y1="320" x2="940" y2="320" marker-end="url(#arrow)" />
  <text class="label" x="720" y="312">GET /call_start.php</text>

  <line class="line" x1="940" y1="350" x2="700" y2="350" marker-end="url(#arrow)" />
  <text class="label" x="720" y="342">JSON ack</text>

  <line class="line" x1="940" y1="390" x2="1320" y2="390" marker-end="url(#arrow)" />
  <text class="label" x="980" y="382">POST createCallStart</text>

  <!-- Section: Call End / Not Answer -->
  <text class="title" x="20" y="460">Call End / Not Answer</text>
  <line class="section" x1="20" y1="470" x2="1360" y2="470" />

  <line class="line" x1="700" y1="510" x2="940" y2="510" marker-end="url(#arrow)" />
  <text class="label" x="720" y="502">GET /index.php (phone1 or single)</text>

  <line class="line" x1="940" y1="540" x2="700" y2="540" marker-end="url(#arrow)" />
  <text class="label" x="720" y="532">JSON ack</text>

  <line class="line" x1="940" y1="580" x2="1140" y2="580" marker-end="url(#arrow)" />
  <text class="label" x="960" y="572">Store phone1 status (if phone2 exists)</text>

  <line class="line" x1="700" y1="620" x2="940" y2="620" marker-end="url(#arrow)" />
  <text class="label" x="720" y="612">GET /index.php (phone2)</text>

  <line class="line" x1="940" y1="650" x2="1140" y2="650" marker-end="url(#arrow)" />
  <text class="label" x="960" y="642">Load phone1 status</text>

  <line class="line" x1="940" y1="690" x2="1320" y2="690" marker-end="url(#arrow)" />
  <text class="label" x="980" y="682">POST createCallEnd or createNotAnswer</text>
</svg>
